// Generated by CoffeeScript 1.6.1
(function() {
  var Q, is_array, put_to_queue, run_queue;

  is_array = require('libprotein').is_array;

  Q = {};

  put_to_queue = function(q, f) {
    var fs;
    if (!Q[q]) {
      Q[q] = [];
    }
    fs = is_array(f) ? f : [f];
    return fs.map(function(f) {
      return Q[q].push(f);
    });
  };

  run_queue = function(q) {
    if (Q[q]) {
      return setTimeout(function() {
        var f, _results;
        _results = [];
        while (f = Q[q].shift()) {
          _results.push(f());
        }
        return _results;
      }, 10);
    } else {
      throw "No such queue: " + q;
    }
  };

  module.exports = {
    put_to_queue: put_to_queue,
    run_queue: run_queue
  };

}).call(this);
